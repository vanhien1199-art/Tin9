<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Tr·ª£ l√Ω Scratch - H·ªèi ƒë√°p</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Google Fonts for modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        :root{
            --primary: #1479ff;
            --accent: #ffa940;
            --bg-start: #f4f7fc;
            --bg-end: #e6f0ff;
            --card: #ffffff;
            --text: #14182a;
            --muted: #6d758c;
            --radius: 16px;
            --shadow-1: 0 6px 24px rgba(20,121,255,0.08);
            --glass: rgba(255,255,255,0.6);
        }

        html,body{
            height:100%;
            margin:0;
            font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            background: linear-gradient(135deg, var(--bg-start), var(--bg-end));
            color:var(--text);
            scroll-behavior:smooth;
        }

        /* Layout */
        .container{
            max-width:980px;
            margin:20px auto 80px;
            padding:0 18px;
        }

        header{
            background: linear-gradient(90deg, var(--primary), #64b5f6 90%);
            color:#fff;
            padding:18px 14px;
            text-align:center;
            border-bottom-left-radius:20px;
            border-bottom-right-radius:20px;
            box-shadow: var(--shadow-1);
            position:relative;
        }
        .home-btn{
            position:absolute;
            left:12px;
            top:12px;
            font-size:1.5rem;
            color:#fff;
            text-decoration:none;
            opacity:0.95;
        }
        header h1{
            margin:0;
            font-size:1.2rem;
            letter-spacing:-0.5px;
            font-weight:700;
        }

        /* Chat card */
        .card{
            background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(250,252,255,0.98));
            border-radius:var(--radius);
            box-shadow: var(--shadow-1);
            padding:14px;
            margin-top:16px;
            transition:transform .12s ease, box-shadow .12s ease;
            display:flex;
            flex-direction:column;
            gap:10px;
        }
        .card:active{ transform:translateY(0); }

        /* Header row */
        .chat-header-row{
            display:flex;
            align-items:center;
            gap:12px;
            justify-content:space-between;
        }
        #ai-chatbot-card h2{ font-size:1.05rem; margin:0; display:flex; align-items:center; gap:10px; }
        #ai-chatbot-card p{ margin:6px 0 0; color:var(--muted); font-size:0.95rem; }

        .chat-controls{ display:flex; gap:8px; align-items:center; }
        .icon-btn{
            background:transparent;
            border: none;
            cursor:pointer;
            padding:8px;
            border-radius:10px;
            color:var(--primary);
            font-size:1rem;
        }
        .icon-btn[aria-pressed="true"]{ background:rgba(20,121,255,0.06); }

        /* Chat window */
        .chat-window{
            flex:1 1 auto;
            min-height:300px;
            border-radius:12px;
            padding:12px;
            display:flex;
            flex-direction:column;
            gap:10px;
            overflow-y:auto;
            -webkit-overflow-scrolling: touch;
            border:1px solid rgba(16,24,64,0.06);
            background: linear-gradient(180deg, rgba(249,252,255,0.9), rgba(245,248,255,0.92));
        }

        /* Message bubbles */
        .chat-message{
            max-width:82%;
            padding:10px 14px;
            border-radius:18px;
            font-size:0.98rem;
            line-height:1.45;
            word-break:break-word;
            white-space:pre-wrap;
            box-shadow: 0 2px 10px rgba(16,24,64,0.03);
        }
        .ai-message{
            align-self:flex-start;
            background: linear-gradient(180deg, #f6f8ff, #eef3ff);
            color:var(--text);
            border-bottom-left-radius:8px;
            border-top-right-radius:8px;
        }
        .user-message{
            align-self:flex-end;
            background: linear-gradient(90deg, var(--primary) 0%, #1a1a1a 100%);
            color:#fff;
            border-bottom-right-radius:8px;
            border-top-left-radius:8px;
        }
        /* small timestamp / meta (optional) */
        .msg-meta{ display:block; font-size:0.75rem; color:var(--muted); margin-top:6px; }

        /* Input area */
        .chat-input-area{
            display:flex;
            gap:10px;
            align-items:center;
            margin-top:6px;
        }
        .chat-input-area input{
            flex:1;
            padding:12px 14px;
            border-radius:24px;
            border:1px solid #e4e9f5;
            font-size:1rem;
            background:#fff;
            outline:none;
            transition:box-shadow .12s ease, border-color .12s ease;
        }
        .chat-input-area input:focus{ box-shadow:0 6px 22px rgba(20,121,255,0.06); border-color:var(--primary); }
        .chat-input-area button{
            background:var(--accent);
            color:#fff;
            border:none;
            padding:10px 14px;
            border-radius:20px;
            cursor:pointer;
            font-weight:600;
            box-shadow:0 6px 18px rgba(255,169,64,0.12);
        }

        /* Fullscreen */
        #ai-chatbot-card.chat-fullscreen{
            position:fixed;
            inset:0;
            width:100vw;
            height:100vh;
            margin:0;
            border-radius:0;
            z-index:9999;
            padding:18px;
            background: linear-gradient(180deg, #fff, #f6fbff);
        }
        #ai-chatbot-card.chat-fullscreen .chat-window{
            height: calc(100vh - 200px);
            min-height: 380px;
        }

        /* Footer - smaller and simplified */
        .site-footer{
            background: linear-gradient(90deg, #232d46, #334877 90%);
            color:#e7eaf1;
            padding:12px 0;
            font-size:0.92rem;
            box-shadow: 0 -4px 22px rgba(52,103,217,0.06);
        }
        .footer-inner{
            max-width:900px;
            margin:0 auto;
            padding:8px 18px;
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap:12px;
        }
        .footer-contact a{ color:#ffd9a6; text-decoration:none; font-weight:600; }
        .footer-note{ color:#c7cbe0; font-size:0.86rem; }

        /* Responsive */
        @media (max-width:700px){
            .container{ padding:0 12px 90px; margin-top:10px; }
            header{ padding:12px; }
            header h1{ font-size:1.05rem; }
            .card{ padding:12px; border-radius:14px; }
            .chat-window{ min-height: 260px; padding:10px; }
            #ai-chatbot-card.chat-fullscreen .chat-window{ height: calc(100vh - 170px); }
            .chat-input-area input{ padding:10px 12px; font-size:0.98rem; }
        }
        @media (max-width:420px){
            .chat-window{ min-height:220px; }
            .chat-input-area button{ padding:9px 12px; font-size:0.95rem; }
            .footer-inner{ flex-direction:column; align-items:center; gap:6px; text-align:center; padding:10px 12px; }
        }
    </style>
</head>
<body id="page-top">
    <header>
        <a href="/" class="home-btn" title="V·ªÅ trang ch·ªß">üè†</a>
        <h1>Tr·ª£ l√Ω H·ªçc Scratch</h1>
    </header>

    <div class="container">
        <section id="ai-chatbot-card" class="card" aria-label="Tr·ª£ l√Ω Scratch chat">
            <div class="chat-header-row">
                <h2>
                    <span style="display:inline-flex;align-items:center;">
                        <svg width="34" height="34" viewBox="0 0 48 48" fill="none" style="margin-right:8px;vertical-align:middle;">
                          <rect x="8" y="14" width="32" height="24" rx="12" fill="#1479ff"/>
                          <rect x="16" y="22" width="16" height="8" rx="4" fill="#fff"/>
                          <circle cx="18" cy="26" r="2" fill="#1479ff"/>
                          <circle cx="30" cy="26" r="2" fill="#1479ff"/>
                          <rect x="21" y="8" width="6" height="6" rx="3" fill="#ffa940"/>
                          <rect x="29" y="8" width="6" height="6" rx="3" fill="#ffa940"/>
                        </svg>
                        Tr·ª£ l√Ω Scratch
                    </span>
                </h2>

                <div class="chat-controls" role="toolbar" aria-label="Chat controls">
                    <button id="toggle-fullscreen-btn" class="icon-btn" title="To√†n m√†n h√¨nh" aria-pressed="false">‚§¢</button>
                    <button id="close-fullscreen-btn" class="icon-btn" title="ƒê√≥ng to√†n m√†n h√¨nh" aria-pressed="false" style="display:none">‚úï</button>
                </div>
            </div>

            <p>Xin ch√†o! M√¨nh l√† Mentor Scratch ‚Äî h·ªèi g√¨ c·ª© h·ªèi nh√©.</p>

            <div id="chat-window" class="chat-window" aria-live="polite">
                <div class="chat-message ai-message">
            Hi! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?
                </div>
            </div>

            <div class="chat-input-area" role="form" aria-label="G·ª≠i tin nh·∫Øn">
                <input type="text" id="user-input" placeholder="ƒê·∫∑t c√¢u h·ªèi b·∫•t k·ª≥..." autocomplete="off" aria-label="N·ªôi dung c√¢u h·ªèi">
                <button id="send-button">G·ª≠i</button>
            </div>
        </section>
    </div>

    <footer class="site-footer" aria-hidden="false">
        <div class="footer-inner">
            <div class="footer-contact">
                <span class="footer-note">Li√™n h·ªá: </span>
                <li>Facebook: <a href="https://www.facebook.com/nung.hien" target="_blank">https://www.facebook.com/nung.hien</a></li>
            </div>
            <div class="footer-note">¬© 2025 Mentor Scratch ‚Äî Website h·ªó tr·ª£ h·ªçc t·∫≠p phi l·ª£i nhu·∫≠n. Made with ‚ù§Ô∏è by Nung Van Hien.</div>
        </div>
    </footer>

    <a href="#page-top" id="back-to-top-btn" title="L√™n ƒë·∫ßu trang" style="display:none;">‚¨ÜÔ∏è</a>

    <script>
    // Footer, Back-to-Top, Fullscreen, Enter-to-send, Smart-scroll
    document.addEventListener('DOMContentLoaded', function() {
        const backToTopBtn = document.getElementById("back-to-top-btn");
        window.onscroll = () => {
            backToTopBtn.style.display = (document.body.scrollTop > 140 || document.documentElement.scrollTop > 140) ? "block" : "none";
        };

        // Fullscreen toggle behavior (CSS class toggle)
        const chatCard = document.getElementById('ai-chatbot-card');
        const toggleBtn = document.getElementById('toggle-fullscreen-btn');
        const closeBtn = document.getElementById('close-fullscreen-btn');
        const chatWindow = document.getElementById('chat-window');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-button');

        function openFullscreenMode() {
            chatCard.classList.add('chat-fullscreen');
            toggleBtn.setAttribute('aria-pressed','true');
            toggleBtn.style.display = 'none';
            closeBtn.style.display = 'inline-block';
            // lock body scroll
            document.documentElement.style.overflow = 'hidden';
            document.body.style.overflow = 'hidden';
            // focus input
            userInput.focus();
        }
        function closeFullscreenMode() {
            chatCard.classList.remove('chat-fullscreen');
            toggleBtn.setAttribute('aria-pressed','false');
            toggleBtn.style.display = 'inline-block';
            closeBtn.style.display = 'none';
            document.documentElement.style.overflow = '';
            document.body.style.overflow = '';
        }
        toggleBtn.addEventListener('click', openFullscreenMode);
        closeBtn.addEventListener('click', closeFullscreenMode);

        // Enter-to-send (non-intrusive; main send logic should be in chatbot.js)
        userInput.addEventListener('keydown', function(e){
            if(e.key === 'Enter' && !e.shiftKey){
                e.preventDefault();
                sendBtn.click();
            }
        });

        // Smart auto-scroll: scroll to bottom only if user near bottom
        const observer = new MutationObserver(() => {
            const nearBottomThreshold = 120;
            const distanceFromBottom = chatWindow.scrollHeight - chatWindow.scrollTop - chatWindow.clientHeight;
            const shouldAutoScroll = distanceFromBottom < nearBottomThreshold;
            if (shouldAutoScroll) {
                chatWindow.scrollTo({ top: chatWindow.scrollHeight, behavior: 'smooth' });
            }
        });
        observer.observe(chatWindow, { childList:true, subtree:true });

        // iOS momentum
        chatWindow.style.webkitOverflowScrolling = 'touch';
    });
    </script>

    <!-- Gi·ªØ nguy√™n m√£ g·ªçi (k√≠ch ho·∫°t) chatbot -->
    <script src="../shared/chatbot.js"></script>
</body>
</html>


